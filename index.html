<!DOCTYPE html>
<html>

	<link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

	<style>

		html {
			background-color: #999a83;
		}

		h1 {
			font-family: 'Raleway', sans-serif;
			color: #1d1d1c;
			font-size: 48px;
		    margin-left: 370px;
		}

		h2 {
			color: #1d1d1c;
			font-family: 'Raleway', sans-serif;
			font-size: 20px;
			top: -20px;
			left: 390px;
			position: relative;
		}

		h2, a {
			color: #1d1d1c;
		}

		button {
			font-family: 'Raleway', sans-serif;
			border: none;
			background-color: #716f54;
			border: none;
			color: #c7c39e;
			padding: 15px 32px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 24px;
			margin: 4px 2px;
			cursor: pointer;
			left: 100px;
			border-radius: 10px;
		    margin-left: 350px;


		}
		
		iframe {
			width: 675px;
			height: 540px;
			margin-top: 20px;
			margin-left: 83px;
			background-image: url("img/tv_static.gif");
		}

		#tvFrame {
			position: absolute;
			z-index: 5;
			top: 22px;
			width: 999px;
			height: 550px;
			left: 1px;
			pointer-events:none;
		}

		#tvScanline {
			position: absolute;
			z-index: 2;
			top: 22px;
			width: 1000px;
			height: 550px;
			pointer-events:none;
			animation: pulse 3s infinite;
			
		}

		#flickHeading {
			position: absolute;
			text-align: left;
			left: 20px;
			top:800px;
		}

		@keyframes pulse {
			0% {
				opacity: 0.3;
			}

			50% {
				opacity: 0.6;
			}

			100% {
				opacity: 0.3;
			}
		}


	</style>



	<head>
		<title></title>
	</head>
	<body>


		<h1>TV Guide</h1>
		<h2>By <a href="https://www.twitter.com/NylePudding">@NylePudding</a></h2>
		<h2 id="flickHeading">Made with <a href="https://www.flickgame.org">flickgame.org</a></h2>
		<div style="position: relative;">
			<img id="tvFrame" src="img/tv_frame_pixel.png">
			<img id="tvScanline" src="img/tv_scanline2.png">

			<iframe id="tv" src="img/tv_static.gif"></iframe>

			<br>
			<br>
			<br>
			<br>
		</div>
		<button onclick="changeChannel()">Change Channel</button>

	</body>
	<script type="text/javascript">

		var tv = document.getElementById("tv");
		var nextChannel = "";
		var tvStatic = "img/tv_static.gif";
		var channelIndex = 0;
		var channelOrder = constructChannels();

		function changeChannel() {

			tv.src = tvStatic;
			nextChannel = channelOrder[channelIndex];
			if (channelIndex < channelOrder.length -1) channelIndex++;

			setTimeout(function(){
				tv.src = nextChannel;
			}, 500);
		}

		function getChannelArrayBeforeFire() {

			var channels = [];

			channels.push("channels/fever_ferret.html?a=1");
			channels.push("channels/gone_fishing.html?a=1");;
			channels.push("channels/rainbow_noodle.html?a=1");
			channels.push("channels/reflection.html?a=1");
			channels.push("channels/a_sour_taste.html?a=1");

			return shuffle(channels);
		}

		function getChannelArrayAfterFire() {

			var channels = [];

			channels.push("channels/cube_pyramid_sphere.html?a=1");
			channels.push("channels/extra_nutrition.html?a=1");
			channels.push("channels/good_television.html?a=1");
			channels.push("channels/has_anyone_seen_the_remote.html?a=1");
			channels.push("channels/ripple.html?a=1");
			channels.push("channels/tiny_bean.html?a=1");
			channels.push("channels/whats_going_on.html?a=1");

			return shuffle(channels);
		}

		function constructChannels() {

			var channels = [];

			channels = getChannelArrayBeforeFire();
			channels.push("channels/fire.html?a=1");
			channels.push("channels/perfect_eggs.html?a=1");
			channels = channels.concat(getChannelArrayAfterFire());
			channels.push("channels/bubbles.html?a=1");
			channels.push("img/tv_static.gif");

			return channels;
		}

		function shuffle(array) {
		  	var currentIndex = array.length, temporaryValue, randomIndex;

		  	// While there remain elements to shuffle...
		  	while (0 !== currentIndex) {

		    // Pick a remaining element...
		    randomIndex = Math.floor(Math.random() * currentIndex);
		    currentIndex -= 1;

		    // And swap it with the current element.
		    temporaryValue = array[currentIndex];
		    array[currentIndex] = array[randomIndex];
		    array[randomIndex] = temporaryValue;
	  	}

  			return array;
		}


	</script>
</html>